{
  "entities": {
    "Client": {
      "title": "Client",
      "description": "Represents a client company.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the client company."
        },
        "logoUrl": {
          "type": ["string", "null"],
          "description": "URL for the client's logo."
        },
        "userIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of Firebase Auth user IDs associated with this client."
        }
      },
      "required": ["name"]
    },
    "User": {
        "title": "User",
        "description": "Maps a Firebase Auth user to a client.",
        "type": "object",
        "properties": {
            "clientId": {
                "type": "string",
                "description": "The ID of the client this user belongs to."
            },
            "role": {
                "type": "string",
                "enum": ["client_user", "consultant"],
                "description": "The role of the user."
            }
        },
        "required": ["clientId", "role"]
    },
    "ActivityComment": {
      "title": "Activity Comment",
      "description": "A comment on an activity.",
      "type": "object",
      "properties": {
        "autor": {
          "type": "string",
          "description": "The author of the comment."
        },
        "texto": {
          "type": "string",
          "description": "The text content of the comment."
        },
        "data": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the comment was created."
        }
      },
      "required": ["autor", "texto", "data"]
    },
    "Activity": {
      "title": "Activity",
      "description": "Represents a task or activity for HR/DP departments.",
      "type": "object",
      "properties": {
        "nome": {
          "type": "string",
          "description": "The name of the activity."
        },
        "categoria": {
          "type": ["string", "null"],
          "enum": ["DP", "RH", "Compartilhado", null],
          "description": "The category the activity belongs to."
        },
        "justificativa": {
          "type": ["string", "null"],
          "description": "The justification for the activity."
        },
        "responsavel": {
          "type": ["string", "null"],
          "description": "The person or department responsible for the activity."
        },
        "recorrencia": {
          "type": ["string", "null"],
          "enum": ["Di√°ria", "Semanal", "Mensal", "Trimestral", "Anual", "Sob demanda", null],
          "description": "The recurrence frequency of the activity."
        },
        "status": {
          "type": "string",
          "enum": ["brainstorm", "aguardando_consenso", "aprovada"],
          "description": "The current status of the activity."
        },
        "comentarios": {
          "type": "array",
          "items": {
            "$ref": "#/entities/ActivityComment"
          },
          "description": "A list of comments on the activity."
        },
        "dataAprovacao": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "The approval date of the activity."
        },
        "ultimaExecucao": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "The last execution date of the activity."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The creation date of the activity."
        },
        "statusTransicao": {
            "type": "string",
            "enum": ["a_transferir", "em_transicao", "concluida"],
            "description": "The transition status of the activity."
        },
        "responsavelAnterior": {
            "type": ["string", "null"],
            "description": "The previous responsible person for the activity."
        },
        "dataInicioTransicao": {
            "type": ["string", "null"],
            "format": "date-time",
            "description": "The start date of the transition."
        },
        "dataConclusaoTransicao": {
            "type": ["string", "null"],
            "format": "date-time",
            "description": "The conclusion date of the transition."
        },
        "prazoTransicao": {
            "type": ["string", "null"],
            "format": "date-time",
            "description": "The deadline for the transition."
        },
        "historicoExecucoes": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "date-time"
          },
          "description": "A history of the last execution dates of the activity."
        },
        "parentId": {
          "type": ["string", "null"],
          "description": "The ID of the parent activity, if this is a sub-task."
        }
      },
      "required": ["nome", "status", "createdAt", "statusTransicao"]
    },
    "ConsultancyAction": {
      "title": "Consultancy Action",
      "description": "Represents an action item defined by the consultancy.",
      "type": "object",
      "properties": {
        "acao": {
          "type": "string",
          "description": "The name or title of the action."
        },
        "como_sera_realizada": {
          "type": "string",
          "description": "Description of how the action will be carried out."
        },
        "responsavel": {
          "type": "string",
          "description": "The person or department responsible for the action."
        },
        "data_inicio": {
          "type": "string",
          "format": "date-time",
          "description": "The start date of the action."
        },
        "data_termino": {
          "type": "string",
          "format": "date-time",
          "description": "The planned end date of the action."
        },
        "prazo_realizado": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "The actual completion date of the action."
        },
        "percentual_concluido": {
          "type": "number",
          "description": "The actual percentage of completion."
        },
        "percentual_planejado": {
          "type": "number",
          "description": "The planned percentage of completion for the current date."
        },
        "status": {
          "type": "string",
          "enum": ["nao_iniciada", "em_andamento", "concluida", "atrasada", "cancelada"],
          "description": "The current status of the action."
        },
        "observacoes": {
          "type": "string",
          "description": "General observations or notes."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The creation date of the action."
        }
      },
      "required": ["acao", "responsavel", "data_inicio", "data_termino", "percentual_concluido", "percentual_planejado", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/clients/{clientId}": {
        "schema": {
            "$ref": "#/entities/Client"
        },
        "description": "Stores information about each client company.",
        "subcollections": {
            "activities": {
                "path": "/clients/{clientId}/activities/{activityId}",
                "schema": {
                    "$ref": "#/entities/Activity"
                },
                "description": "Stores all activities for a specific client."
            },
            "actions": {
                "path": "/clients/{clientId}/actions/{actionId}",
                "schema": {
                    "$ref": "#/entities/ConsultancyAction"
                },
                "description": "Stores all consultancy action items for a specific client."
            }
        }
    },
    "/users/{userId}": {
        "schema": {
            "$ref": "#/entities/User"
        },
        "description": "Maps Firebase Auth UIDs to client IDs and roles."
    }
  }
}
